# Запуск вместе с Docker :id=docker

Brocket позволяет быстро развернуть инфраструктуру для запуска сайта с помощью Docker. Выполните команду ниже, чтобы создать необходимые файлы конфигурации - а именно, `Dockerfile`, `docker-compose.yml` и папку `docker` с настройками сервера

```sh
php brocooly vendor:docker
```

После этого Вы можете запустить контейнер командой

```sh
docker-compose up -d --build
```

!> Для запуска в Docker переменная `DB_HOST` должна иметь значение имени образа - то есть, `mysql`. Также для корректной работы сервера необходимо определить переменную `DOMAIN`

Затем измените разрешения и владельца папки `web/app/uploads` на `www-data`. Это нужно для того, чтобы пользователь сайта имел возможность загружать файлы через медиа-загрузчик из админ-панели

```sh
docker exec -it brocket-php bash

chown -R www-data:www-data /var/www/html/web/app/uploads

chmod -R 755 /var/www/html/web/app/uploads
```

## SSL :id=ssl

Чтобы запустить сайт по https-протоколу, Вы можете установить [mkcert](https://github.com/FiloSottile/mkcert), проследовать первичным настройкам пакета, а затем внутри папки `docker/nginx/certs` создать ключи сертификата

```sh
cd docker/nginx/certs

mkcert domain.name
```

Команда создаст пару ключей для домена domain.name - закрытый и открытый - которые Вы и должны подключить в файле конфигурации сервера `docker/nginx/default.conf`.

!> Если в процессе разработки Вы видите ошибку `SSL_ERROR_RX_RECORD_TOO_LONG`, откройте сайт не по адресу `localhost:3000`, а по `127.0.0.1:3000` или же в режиме инкогнито

Конечно, Вы можете изменить любую конфигурацию по своему желанию или же вовсе не использовать Docker